#!/usr/bin/env sh

# Clone repositories managed by this project into parent repo
set -e
projectRoot=$(a="/$0"; a=${a%/*}; a=${a:-.}; a=${a#/}/; cd "$a/.." || return; pwd)

(
  cd "${projectRoot}"
  cd ..

  printf "\nCloning repositories\n"

  test -d dream-league-identity \
    && >&2 echo "The 'dream-league-identity' directory already exists. Skipping." \
    || git clone https://github.com/johnwatson484/dream-league-identity.git
  test -d dream-league-api-gateway \
    && >&2 echo "The 'dream-league-api-gateway' directory already exists. Skipping." \
    || git clone https://github.com/johnwatson484/dream-league-api-gateway.git
  test -d dream-league-web \
    && >&2 echo "The 'dream-league-web' directory already exists. Skipping." \
    || git clone https://github.com/johnwatson484/dream-league-web.git
  test -d dream-league-league \
    && >&2 echo "The 'dream-league-league' directory already exists. Skipping." \
    || git clone https://github.com/johnwatson484/dream-league-league.git
  test -d dream-league-admin \
    && >&2 echo "The 'dream-league-admin' directory already exists. Skipping." \
    || git clone https://github.com/johnwatson484/dream-league-admin.git
  
  printf "\nBuilding images\n"

  scripts/build
)

